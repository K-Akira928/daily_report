## 取り組んだ課題

### React

- TodoList の作成
  - レビュー対応

### Web セキュリティについて学ぶ

- Rails セキュリティガイド - Rails ガイド を読む
  - 目次 4 まで

## わかったこと

- セッションハイジャック
  - 原因:攻撃者がユーザーのセッションを盗み、そのユーザーとして Web アプリを操作する
  - cookie が盗聴されないように SSL での接続が必要
  - ログアウトボタン等の cookie を消去する意図のあるボタンを目立つように提供する
- セッションストレージ
  - 原因:Rails の `CookieStore` はクライアント側の cookie にセッションハッシュを保存する
  - cookie の上限は 4KB
  - クライアントでは失効した cookie にも内容が残っていることがある
  - cookie は一時的な情報であるべき
  - セッション cookie が自分自身を無効にすることはないため、悪用目的で使いまわされる可能性がある
- セッション固定攻撃
  - ユーザーのセッション ID を盗む代わりに、ユーザーのセッション ID を攻撃者が知っているセッション ID に固定する
  - ログイン成功後に古いセッションを無効にして新しいセッション ID を発行することで対策できる
- クロスサイトリクエストフォージェリ（CSRF）
  - 認証が完了したとユーザーが信じている Web アプリケーションのページに、悪意のあるコードやリンクを設置する
  - GET と POST を適切に使分けることで対策できる
  - 必須セキュリティトークンを導入し、自身のサイトでのみ生成されたトークンとマッチするかどうかを検証する
- リダイレクト
  - ユーザーを本物そっくりな偽 web サイトにリダイレクトするなどの攻撃
  - リダイレクトする URL の一部をユーザーが入力できないようにすることで対策できる
- ファイルアップロード
  - ファイル名にファイル構造を示す path が入力されていると意図しないディレクトリでファイルが上書きされる恐れがある
  - ユーザーによるファイルアップロード(ファイル名)は必ず許可リストでフィルタする
  - アップロードされたファイルに含まれるコードが特定のディレクトリに置かれると実行可能になってしまう可能性がある
  - `DocumentRoot` のディレクトリツリーに置かれているものは全て Web サーバーによって配信されてしまうため
- ファイルのダウンロード
  - ファイルのアップロードと同様にファイル名をフィルタするべき
  - フィルタ処理を行っていないとユーザーが任意のファイルをダウンロードする、ということも可能になってしまう
  - 対策:リクエストされたファイル名が想定されているディレクトリの元にあるかどうかをチェックすること
  - 対策:ファイル名を DB に保存しておき、DB 上の ID をサーバーのディスク上に置く実際のファイル名の代わりに使うこと

## 次やること

### Web セキュリティについて学ぶ

- Rails セキュリティガイド - Rails ガイド を読む
  - 目次 5 から

## 感じたこと

- セキュリティ関連の勉強はゲームの対戦メタを見ているようで楽しい

## 学習時間

Today:1.5h Total:837.5h
