## 取り組んだ課題

### Web セキュリティについて学ぶ

- Rails セキュリティガイド - Rails ガイド を読む
  - 目次 読了

## わかったこと

- インジェクション
  - インジェクションとは web アプリケーションに悪質なコードやパラメータを導入し、その時の権限で実行させること
- 許可リストと禁止リスト
  - 禁止方式でフィルタをするのはヒューマンエラーなどの観点から基本的には許可方式での作成が望ましい
  - Rails でいうと `before_action only:` ではなく、 `before_action exept:` とするべき
- SQL インジェクション
  - SQL インジェクションは web アプリケーションのパラメターを操作し DB に影響を与えることを目的とした攻撃
  - 対策としては入力された特殊な SQL 文字をフィルタすること
- クロスサイトスクリプティング(XXS)
  - HTML や JavaScript に悪質なスクリプトを埋め込む攻撃手法
  - 対策としては悪意のある入力をフィルタすることが極めて大切
    - 同時に web アプリケーションの出力もエスケープする
    - この時にも禁止ではなく許可を使用する
- CSS インジェクション
  - JavaScript にはどんな文字列もコードとして実行できてしまう `eval` 関数があり、これを悪用すると巧妙にコードを仕込むことができてしまう
  - web アプリケーションで CSS を直接できてしまうアプリケーションの場合、ユーザーに設定を選んでもらった後にビルドし CSS を生成するといったアプローチをとるべき
- テキスタイルインジェクション
  - HTML 以外のテキストフォーマット機能を実装する場合には、何らかのマークアップ言語を採用し、サーバー側で HTML に変換する
- Ajax インジェクション
  - ビューをレンダリングせずに文字列を返すアクションを使う場合には、アクションが返す値を必ずエスケープする必要がある
  - 戻り値に XSS で汚染された文字列が含まれている場合、ブラウザで表示されたときに悪意のあるコードが実行されてしまうため
- コマンドラインインジェクション
  - web アプリケーションで背後の OS コマンドを実行する場合には `|` や `;` を追加することで結合できてしまう点に注意が必要
  - コマンドラインのパラメターを安全に渡せるメソッド等を使用すること
- ヘッダーインジェクション
  - HTTP リクエストヘッダで使われるフィールドはユーザー側から提供されるもので手間をかければ操作できてしまう
  - これらの情報もエスケープするべき
- HTTP セキュリティヘッダー
  - セキュリティを強化するために Rails では HTTP セキュリティヘッダーを返すように設定できる
- インフラネットと Admin のセキュリティ
  - イントラネットや管理画面インターフェースは特権アクセスが許可されているために攻撃の標的にされることが多い
- クロスサイトスクリプティング
  - 悪意のあるユーザーがイントラネットの外から入力したデータが web アプリケーションで再表示されると web アプリケーションが XSS に対して脆弱になる
  - ユーザー名やコメント、住所フォームの情報が攻撃に使われることも珍しくない
- クロスサイトリクエストフォージェリ
  - これは非常に強力な攻撃手法で、この攻撃を受けると管理者やイントラネットユーザーが実行可能な操作をすべて行えるようになってしまう

## 次やること

### Web セキュリティについて学ぶ

- 安全なウェブサイトの作り方
  - 読む

## 感じたこと

- 理解はできるけど実際に攻撃されることやしたことがないと中々イメージが掴みづらいなぁ...と感じた

## 学習時間

Today:2h Total:841h
