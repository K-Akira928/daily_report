# 取り組んだ課題
- SQLⅡ~Ⅴ
- SQL 道場レッスン Ⅰ
- Ruby on Rails5 Ⅰ~Ⅲ
- Ruby on Rails5 道場レッスン Ⅰ
# わかったこと
## SQL Ⅱ
- DISTINCT を用いると、検索結果から重複するデータを除外することが可能。 `DISTINCT (カラム名)`
- SQLで四則演算が可能。 `カラム名 演算記号 数値`
- 数値の合計を計算する場合、SUMを用いる。 `SUM (カラム名)`
- 数値の平均を計算する場合、AVGを用いる。 `AVG (カラム名)`
- COUNTは指定したカラムデータの合計数を計算する。 `COUNT (カラム名)`
※NULLになっているデータは計算されない。計算したい場合は ( * )を使う。
- MAXを使うと指定したカラムデータの中から最大のデータを取得する。 `MAX (カラム名)`
MINを使うとその逆で、最小のデータを取得する。`MIN (カラム名)`
- GROUP BYを使うとデータをグループ化することができる。`GROUP BY カラム名`
グループ化するには、今までの集計関数を取得するFROMの後に GROUP BY カラム名 を追加する。集計結果をGROUP BYで各グループデータでまとめるイメージ。
    - GROUP BY は複数のカラム名を適用させることができる。その場合、カラム名同士をコンマ( , )で繋げる。
    - グループ化したデータを更に絞り込みたい場合、HAVINGを使う。`GROUP BY カラム名 HAVING 条件`条件文で使うカラムはグループ化されたテーブルのカラムを使うことに注意。

## SQL Ⅲ
- クエリの中に他のクエリを入れることを、サブクエリと呼ぶ。サブクエリの書き方は( )で囲むこと、( ) 内に( ; )は不要。
- ASを使うことでカラム名などに別名を定義することができる。`カラム名 AS “名前”`
- テーブル同士を紐づけるために、外部キーと主キーを使う。外部キーで他のテーブルにある主キーを指定することでテーブル同士を紐づけることができる。
- JOINは複数のテーブルを１つに結合したいときに使う。ONで条件を指定して、テーブルAにテーブルBを結合する。
`FROM テーブルA`
`JOIN テーブルB`
`ON テーブルA.カラム名(外部キー) = テーブルB.カラム名(主キー)`
- 複数のテーブルに同じカラム名が存在する場合、`テーブル名.カラム名`で指定する。
- 通常JOINでは外部キーがNULLの場合レコードを取得できないが、LEFT JOINを使うことで、FROMで指定したテーブルのレコードを全て取得できる。外部キーがNULLのレコードもNULLのまま実行結果に表示される。
- JOINは１つのクエリで複数回使用できる。

## SQL Ⅴ
- テーブルにレコードを挿入したい時にはINSERTを使う。
`INSERT INTO テーブル名 (内容1, 内容2, 内容3….)`
`VALUES (内容1, 内容2, 内容3….)`
    - 多くの場合、idカラムにはAUTO INCREMENT(自動で増加する)という機能があり、データが作成されるときに自動で値が割り当てられる。この場合、idを省略して書くことができる。
- データを更新したいときはUPDATEを使う。
`UPDATE テーブル名`
`SET 指定 = “カラム1”, 指定 = “カラム2”`
`WHERE id = レコード値`
※WHEREでレコード値を指定しないとカラム内の全データが更新されてしまう。
- レコードを削除するときにはDELETEを使う。
`DELETE FROM テーブル名`
`WHERE id = レコード値`
※WHEREでレコード値を指定しないとテーブル内の全データさ削除されてしまう。

## **Ruby on Rails5 I**
- Railsで開発を始める際には、rils new アプリケーション名 というコマンドをターミナルで実行する。
- サーバーの起動には `rails server` というコマンドを実行する。
- トップページを作成するには、`rails generate controller home top` というコマンドをターミナルで実行する。
- Railsでページを表示するには３つのファイルが必要。
    - ビュー(View)
        - ビューはページの見た目を作るためのHTMLファイル。
        ブラウザとRailsのやりとりでRailsからビューが返され、ページが表示される。
        - ビューはviewsフォルダの中に置かれる。
        - ビュー(HTMLファイル)の中身がブラウザに表示される内容。
    - コントローラ(controller)
        - ページを表示するとき、Railsの中ではコントローラを経由してビューをブラウザに返している。
        - コマンドを実行するとファイルが作成され、ファイルの中にメソッドが追加される。コントローラ内のメソッドをアクションと呼ぶ。
        - コントローラ内のアクションは、ブラウザに返すビューをviewsフォルダの中から見つけだす役割を担っている。具体的には、コントローラと同じ名前のビューフォルダから、アクションと同じ内容のHTMLファイルを探してブラウザに返す。
    - ルーティング(routing)
        - Rails内ではコントローラを経由してビューを返しているが、ブラウザとコントローラをつなぐ役割を担うのがルーティング。
        ページを表示するまでに、ルーティング→コントローラ→ビューという順番で処理が行われている。
        - ルーティングは、送信されたURLに対して、どのコントローラのどのアクションで処理するかを決める対応表のこと。ブラウザでURLを入力すると、ルーティングがURLを見て、適切なコントローラのアクションを呼び出す。
        - ルーティングは config/routes.rb に定義され、
        `get “URL” ⇒ “コントローラ名#アクション名”` という文法で書かれる。
        - ルーティングを書き換えることで、トップページのURLを変更することが可能。
        URLを変更しても ”コントローラ名#アクション名” の部分が変わらない限りコントローラのアクションに対応するビューファイルが表示される。
- `rails generate controller コントローラ名 アクション名` を実行することで、コントローラと、それに対応したファイルが自動で用意される。
しかし、同じ名前のコントローラがすでにある場合、このコマンドを使うことはできない。
- 既に作られているルーティングとコントローラのファイルにコードを書き足すことで、ルーティングとアクションを追加できる。
- CSSファイルは app/assets/stylesheets フォルダに入っている。
Railsでは、stylesheetsフォルダ内の中に保存されているCSSファイルにコードを書くと、すべてのビューにCSSが適用される。
- 画像はpublicフォルダに配置しておくと、/画像名を指定するだけで画像を表示させることができる。
- lochalhost:3000 に対応するルーティングは、`get “/” ⇒ “コントローラ名#アクション名”`というように、URLに”/”を指定する。
- リンクの作成には<a>タグのhref = “” の中をルーティングのURLと同じにすることで、簡単にリンク先を指定することができる。

## **Ruby on Rails5 Ⅱ**
- 目的に合わせてコントローラを作成することが重要。
`rails generate controller コントローラ名 アクション名`
`rails g controller コントローラ名 アクション名` と省略して書くこともできる。
- erbという形式のファイルでは<% %>と囲むことで、HTMLファイルの中にRubyのコードを記述することができる。
    - 埋め込むRubyコードをブラウザに表示したい場合には、<% %> ではなく、<%= %>を使用する。
- Railsでは変数をアクションで定義することが一般的。
コントローラ内のメソッド内で変数を定義することでコントローラの呼び出し先のビューで使用することができる。
    - 変数を定義する際、変数名の前に@を付けることで特殊な変数となり、ビューファイルでも使用できるようになる。
- データベースを作成するには、マイグレーションファイルと呼ばれる、データベースに変更を指示するためのファイルを作成する。
`rails g model テーブル名 カラム名:データ型` というコマンドで作成できる。
コマンドを実行すると、db/migrate フォルダの下にマイグレーションファイルが作成される。
    - データベースに変更を反映する際は `rails db:migrate` コマンドを実行する。
    テーブル作成時にid, created_at, updated_atが自動生成される。
- rails g model コマンドでモデルが定義されたファイルが app/models フォルダの中に生成されている。ファイルの中にはApplicationRecordクラスを継承するクラスが定義されている。このApplicationRecordを継承したクラスをモデルと呼ぶ。
- ターミナル上で rails console と入力し実行すると、コンソールを起動することができる。また、quitを実行するとコンソールを終了できる。
コンソールでは変数を定義することもできる。定義した変数は quit でコンソールを終了するまで使い続けることができる。
- テーブルにデータを追加するには、newメソッドでモデルのインスタンスを作成。データベースのテーブルに保存。この２つの手順。
    - 作成したインスタンスをテーブルに保存するには、`saveメソッド`を使う。saveメソッドを使うことができるのはモデルがApplicationRecordを継承しているため。
- `firstメソッド`を使うことでテーブルにある最初のデータを取得することができる。
    - `contentメソッド`を使うことで取得したデータから内容を取得することができる。
- `allメソッド`を使うとテーブルにあるすべてのデータを配列で取得できる。
- Railsでは、views/layouts/application.html.erb に共通のHTMLを書いておくことができる。
- Railsでは、link_toというメソッドを使うと<a>タグを作成することができる。
`<%= link_to(”第一引数”, “第二引数”) %>`
※Rubyのコードなので、<%= %>で囲むことに注意。

## **Ruby on Rails5 Ⅲ**
- データベースから特定のidを取得するためには、find_byメソッドを使う。
find_byメソッドは、ある条件に合致するデータを取得することができる。
`モデル名.find_by(カラム名:値)`
- ルーティングのURL部分に( : )を用いて書くとどのURLでアクセスしても指定のアクションにいくようにすることができる。
    - ルーティングは合致するURLを上から順に探す。このため、( : )を使ったルーティング構成の際は書く位置に注意する。
- コントローラのアクション内では、ルーティングで設定したURLの :○○の値を取得することができる。その値はparamsという変数にハッシュとして入っている。
params[:○○]とすることで、その値を取得できる。
- 受け取ったデータをデータベースに保存する(データベースを変更する)にはルーティングに `post` で書き始める。
    - `from_tagメソッド`を用いると、入力されたデータを送信することができる。
    form_tagは、`from_tag(送信先のURL) do` のように送信先のURLを指定する。
    `do` と `end` の中にフォームを作る。
- 他のURLに転送(リダイレクト)するには、`redirect_toメソッド`を使う。
`redirect_to(URL)`とすることで、そのページに転送することができる。
- <textarea>タグにname属性を指定すると、入力データを送信することができ、name属性の値をキーとしたハッシュがRails側に送られる。`{name属性 : 入力内容}`
    - name属性を指定したフォームに入力されたデータは、コントローラのアクション内で受け取ることが可能尾になる。フォームのデータは、変数paramsで受け取る。paramsはname属性に設定した文字列をキーとしたハッシュになっている。
- orderメソッドを使うことで、並び替えることができる。
`order(カラム名: 並び替えの順序)` 順序には昇順(:asc)と降順(:desc)のどちらかを指定できる。
  
# 次やること
- Ruby on Rails5 IX~
# 感じたこと
- SQL
  - 気に表示を完成させるのではなく１つ１つ分けて考えると楽だった。
  - グループ化の概念イメージがまだよくつかめてない気がする。
  - テーブルの更新や削除などでは慎重にならないといけないと思った。
- Ruby on Rails
  - 自分が普段使ってるWebアプリの裏側を知れて楽しかった。
  - 他のレッスンで学んだことが生かされている感じがしてこの感覚をどんどん積み重ねていきたい。
 # 学習時間
 Today:9.5h Total:27h
  
  
  
  
  
