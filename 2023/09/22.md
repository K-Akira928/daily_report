## 取り組んだ課題
### Ruby on Rails
- Ruby on Rails5速習実践ガイドを読む
  - Chapter5-9まで
## わかったこと
- マイグレーションはデータベースごとに適用する必要がある
	- デフォルトでは開発用データーベース `db:migrate`
	- 本番用データーベースにマイグレーションを実施 => `db:migrate RAILS_ENV=production`
	- テスト用データーベースにマイグレーションを実施 => `db:migrate RAILS_ENV=test`
- マイグレーションの適用中にエラーが発生した場合は、適用しかけた変更はロールバックされるのでコードを修正して再度適用を試みる
- テーブル作成のマイグレーションと変更専用のマイグレーションで同じ効果が得られる場合の使い分けは、テーブル作成マイグレーションをまだほかの開発者が利用していない段階であれば前者で利用されている場合は後者
- `change_column` ではバージョンを戻す際の動作をバージョンを上げるコードから自動生成できないため、バージョンダウンの処理も記述しなければならない
- ユニークインデックスでは **NULL** 同士は異なる値として扱われる
- saveメソッドはデーターベースへの登録や更新を行う前に自動的に検証を行い、エラーがあればfalseを返す
	- 検証処理単独で呼ぶ際にはvalid?というメソッドを利用する
	- save!はfalseではなく例外を発生させるメソッドで、基本的に登録や更新が成功するはずと信じている場面ではsaveよりもsave!を使ったほうが予期せぬ失敗を防げる
	- 意図的に検証をスキップする際には、`validate: false` オプションをメソッドに渡す
- 検証を自身で追加するステップは2つ
	- 検証用のメソッドをモデルクラスに登録
	- 検証用のメソッドを実装する
	- 検証用メソッドの基本的な役割は、検証エラーを発見したらerrorsにエラー内容を格納すること
- 重要なイベントの前後に任意の処理を挟むことを **コールバック** という
- Railsではコールバック全体を1つのトランザクションで囲ってsaveを実行するため、コールバックの1つで例外が発生するとロールバックが発生する、よってコールバック全体での整合性が保たれる
- セッション内のデータを全て削除したい場合は `reset_session` とする
- データの絞り込み条件に対して `to_sql` メソッドを使うことで生成予定のSQLをみることができる
- scopeを使うことで、クエリをメソッドとして使うことができる
- 自動テストはgem等をバージョンアップしていくRailsにとって非常に重要
- System Specのテスト構文の内容は2つに分けられる
	- テストケースを整理・分類する => describe, context
	- テストコードを実行する => before, it
## 次やること
### Ruby on Rails
- Ruby on Rails5速習実践ガイドを読む
  - Chapter5-10から
## 感じたこと
- 途中、エラー等で詰まった時の解決スピードが上がってきた気がする！
- テストを書くのが楽しい
## 学習時間
Today:5.5h Total:403h